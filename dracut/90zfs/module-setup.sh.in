#!/bin/bash

check() {
	require_binaries zpool zfs mount.zfs || return 1
	return 0
}

depends() {
	echo udev-rules
	return 0
}

cmdline() {
	return 0
}

installkernel() {
	hostonly='' instmods zfs
}

install() {
	inst_hook cmdline 90 "$moddir/parse-zfs.sh"
	inst_hook mount 98 "$moddir/mount-zfs.sh"
	inst_rules 60-zvol.rules
	inst_rules 69-vdev.rules
	inst_rules 90-zfs.rules
	inst @sbindir@/zpool
	inst @sbindir@/zfs
	inst @sbindir@/mount.zfs
	inst_multiple -o @sbindir@/zdb @sysconfdir@/zfs/zpool.cache @sysconfdir@/hostid @sysconfdir@/zfs/vdev.conf /usr/bin/hostid
}
