include $(top_srcdir)/config/Rules.am

DEFAULT_INCLUDES += -I$(srcdir)

AM_CFLAGS += -fvisibility=hidden
# See https://debbugs.gnu.org/cgi/bugreport.cgi?bug=54020
AM_CFLAGS += -no-suppress

noinst_LTLIBRARIES = libshare.la

USER_C = \
	libshare_impl.h \
	libshare.c \
	nfs.c \
	nfs.h \
	smb.h

if BUILD_LINUX
USER_C += \
	os/linux/nfs.c \
	os/linux/smb.c
endif

if BUILD_FREEBSD
USER_C += \
	os/freebsd/nfs.c \
	os/freebsd/smb.c
endif

libshare_la_SOURCES = $(USER_C)

include $(top_srcdir)/config/CppCheck.am
